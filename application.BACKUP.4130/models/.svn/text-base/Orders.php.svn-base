<?php
/**
 * Orders
 * 
 * @author Alex
 * @version 
 */
require_once 'Zend/Db/Table/Abstract.php';
class Model_Orders extends Zend_Db_Table_Abstract
{
    /**
     * The default table name 
     */
    protected $_name = 'orders';
    
    public function createOrder($userID,$bfName,$blName,$bAddress,$bState,$bCountry,$bCity,$bZip,
                                $sfName,$slName,$sAddress,$sState,$sCountry,$sCity,$sZip,
                                $subtotal,$shipping,$total,$cc
                                ) 
	{ 
		$row = $this->createRow(); 
		
		$row->userID=$userID;
		$row->bfName= $bfName; 
		$row->blName= $blName; 
		$row->bAddress= $bAddress ;
		$row->bState= $bState; 
		$row->bCountry= $bCountry; 
		$row->bCity= $bCity; 
		$row->bZip= $bZip; 
		$row->sfName= $sfName; 
		$row->slName= $slName; 
		$row->sAddress= $sAddress; 
		$row->sState= $sState; 
		$row->sCountry= $sCountry; 
		$row->sCity= $sCity; 
		$row->sZip= $sZip; 
		$row->subtotal= $subtotal; 
		$row->shipping= $shipping; 
		$row->total= $total; 
		$row->cc= $cc; 
		$row->status= "new"; 
		
		$dateObject = new Zend_Date($date); 
		$row->insert_date = $dateObject->get(Zend_Date::TIMESTAMP); 

		return $row->save(); 
	}

	public function getOrder($orderID)
	{
	    return $order = $this->find($orderID)->current(); 
	}
}

class Model_OrdersDetails extends Zend_Db_Table_Abstract
{
    /**
     * The default table name 
     */
    protected $_name = 'orderDetails';
    
    public function createOrderDetails($orderID,$productID,$quantity) 
	{ 
		$row = $this->createRow(); 
		
		$row->orderID=$orderID;
		$row->prodID=$productID;
		$row->quantity=$quantity;
		
		return $row->save(); 
	} 
	
	public function getOrderDetails($detailsID)
	{
	   		$select = $this->select(); 
				$select->where("orderID = ?", $detailsID); 
				
		return $rows = $this->fetchAll($select);  
	}
}
