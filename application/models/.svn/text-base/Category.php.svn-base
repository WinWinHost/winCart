<?php


 
class Model_Category extends Zend_Db_Table_Abstract { 
    /** 
     * The default table name 
     */ 
    protected $_name = 'prodcat'; 
	
	public function fetchPaginatorAdapter($filters = array(), $sortField = null) 
	{ 
		$select = $this->select(); 
		// add any filters which are set 	
		if(count($filters) > 0) { 
			foreach ($filters as $field => $filter) { 
				$select->where($field . ' = ?', $filter); 
			} 
		} 
		
		// add the sort field is it is set 
		if(null != $sortField) { 
			$select->order($sortField); 
		} 
    
		// create a new instance of the paginator adapter and return it 
		$adapter = new Zend_Paginator_Adapter_DbTableSelect($select); 
		return $adapter; 
	} 
	
	public function createCat($name){
	
	 // create a new row in the bugs table 
	    $row = $this->createRow(); 
		
		    // set the row data 
		$row->name = $name; 
		$row->price = $price; 
		$dateObject = new Zend_Date($date); 
		$row->insert_date = $dateObject->get(Zend_Date::TIMESTAMP); 
		$row->cost = $cost; 
		$row->stock = $stock;
		$row->thump = $image; 				
		$row->keywords = $keywords; 
		$row->description = $description; 
 
		// save the new row 
		$row->save(); 
	   
	     $id = $this->_db->lastInsertId(); 
		return $id; 
	}
	
	public function updateProduct($id,$name,$price,$cost,$stock,$image,$keywords,$description){
		// find the row that matches the id 
		$row = $this->find($id)->current(); 
 
		if($row) { 
		
		    // set the row data 
		$row->name = $name; 
		$row->price = $price; 
		$dateObject = new Zend_Date($date); 
		$row->insert_date = $dateObject->get(Zend_Date::TIMESTAMP); 
		$row->cost = $cost; 
		$row->stock = $stock;
		$row->thump = $image; 				
		$row->keywords = $keywords; 
		$row->description = $description; 
 
		// save the new row 
		$row->save(); 
 
		return true; 
		} else { 
			throw new Zend_Exception("Update function failed; could not find row!"); 
		} 
	}
	
	public function deleteProduct($id) 
	{ 
		// find the row that matches the id 
		$row = $this->find($id)->current(); 
		if($row) { 
			$row->delete(); 
			return true; 
		} else { 
			throw new Zend_Exception("Delete function failed; could not find row!"); 
		} 
	} 
}
 
 ?>